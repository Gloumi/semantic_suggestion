<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:layout name="Default" />

<f:section name="content">
    <h1>Semantic Suggestion Analysis</h1>

    <h2>Configuration</h2>
    <table class="table table-striped">
        <tr>
            <th>Parent Page ID</th>
            <td>{parentPageId}</td>
        </tr>
        <tr>
            <th>Depth</th>
            <td>{depth}</td>
        </tr>
        <tr>
            <th>Proximity Threshold</th>
            <td>{proximityThreshold}</td>
        </tr>
        <tr>
            <th>Max Suggestions</th>
            <td>{maxSuggestions}</td>
        </tr>
    </table>

    <h3>Analyzed Fields and Weights</h3>
    <table class="table table-striped">
        <tr>
            <th>Field</th>
            <th>Weight</th>
        </tr>
        <f:for each="{analyzedFields}" as="weight" key="field">
            <tr>
                <td>{field}</td>
                <td>{weight}</td>
            </tr>
        </f:for>
    </table>

    <h2>Analysis Results</h2>
    <f:if condition="{analysisResults}">
        <f:then>
            <table class="table table-striped">
                <tr>
                    <th>Page ID</th>
                    <th>Title</th>
                    <th>Similar Pages</th>
                </tr>
                <f:for each="{analysisResults}" as="pageData" key="pageId">
                    <tr>
                        <td>{pageId}</td>
                        <td>{pageData.title.content}</td>
                        <td>
                            <ul>
                                <f:for each="{pageData.similarities}" as="similarity" key="similarPageId">
                                    <f:if condition="{similarity.score} >= {proximityThreshold}">
                                        <li>
                                            Page {similarPageId}: 
                                            Score: {similarity.score -> f:format.number(decimals: 2)}, 
                                            Relevance: {similarity.relevance}
                                        </li>
                                    </f:if>
                                </f:for>
                            </ul>
                        </td>
                    </tr>
                </f:for>
            </table>
        </f:then>
        <f:else>
            <p>No analysis results available. Please check your configuration.</p>
        </f:else>
    </f:if>
</f:section>

</html>